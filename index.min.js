"use strict";const API_KEY="f88c3a45cec61d60561069a2513612bc",TOTAL_PAGES=500,generateRandomNumber=(e,t)=>Math.floor(Math.random()*e+t),generateDatabaseUrl=(e,t)=>`https://api.themoviedb.org/3/discover/movie?api_key=${e}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${t}`,fetchMovieData=async e=>{const t=await fetch(e);return await t.json()};let ratingVal=0,yearVal=0;const displaySearchWarning=(e,t)=>{"rating"===e?ratingVal=parseInt(t):"year"===e&&(yearVal=parseInt(t));const a=document.querySelector("#search-alert");ratingVal>7||yearVal>11||ratingVal+yearVal>17?(a.style.marginTop="0",a.style.opacity="1"):(a.style.marginTop="-7.5em",a.style.opacity="0")},displayRangeValueOutput=(e,t,a="")=>{const n=document.querySelector(e),r=document.querySelector(t);switch(r.innerText="ALL",a){case"year":n.oninput=function(){"0"===n.value?r.innerText="ALL":(displaySearchWarning("year",n.value),r.innerHTML=`${10*this.value+1900} +`)};break;default:n.oninput=function(){"0"===n.value?r.innerText="ALL":(displaySearchWarning("rating",n.value),r.innerHTML=this.value)}}return n},RATING_SLIDER=displayRangeValueOutput("#min-rating","#range-output"),YEAR_SLIDER=displayRangeValueOutput("#min-year","#year-output","year"),timedScroll=e=>{let t=0;!function a(){setTimeout(()=>{t<e.length-1&&(setTimeout(()=>{document.querySelector("#movie-title").innerText=e[t]},0),t++,a())},50)}()},finalMovieDetails=(e,t)=>{document.querySelector("#movie-title").innerText=e[t].title,document.querySelector("#movie-image").innerHTML=`<img src="https://image.tmdb.org/t/p/w600_and_h900_bestv2${e[t].poster_path}" alt="Movie Poster" />`,document.querySelector("#description").innerText=e[t].overview,document.querySelector("#rating").innerText=e[t].vote_average,document.querySelector("#year").innerText=e[t].release_date.substring(0,4)},finalMovie=(e,t)=>{if(e[t].vote_average<parseInt(RATING_SLIDER.value)||parseInt(e[t].release_date.substring(0,4))<10*YEAR_SLIDER.value+1900)for(let a=0;a<e.length;a++){if(e[a].vote_average>=parseInt(RATING_SLIDER.value)&&parseInt(e[t].release_date.substring(0,4))>=10*YEAR_SLIDER.value+1900){finalMovieDetails(e,a);break}randomMovie();break}else finalMovieDetails(e,t)},randomMovie=()=>{fetchMovieData(generateDatabaseUrl(API_KEY,generateRandomNumber(500,1))).then(function(e){return e.results.map(e=>e)}).then(function(e){const t=e.map(e=>e.title);timedScroll(t),setTimeout(finalMovie,1e3,e,generateRandomNumber(e.length,0))})};document.querySelector("#get-random-movie").addEventListener("click",randomMovie,!1);